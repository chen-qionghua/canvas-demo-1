{"version":3,"sources":["main.js"],"names":["canvas","document","getElementById","thin","thick","black","red","yellow","blue","eraser","pen","clear","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","fillStyle","strokeStyle","lineWidth","lineCap","painting","eraserEnabled","lastPoint","undefined","monitor","onclick","classList","add","remove","clearRect","download","a","createElement","url","toDataURL","href","click","isTouchDevice","ontouchstart","e","x","touches","clientX","y","clientY","ontouchmove","drawLine","ontouchend","onmousedown","onmousemove","onmouseup","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["let canvas = document.getElementById(\"canvas\");\r\nlet thin = document.getElementById(\"thin\");\r\nlet thick = document.getElementById(\"thick\");\r\nlet black = document.getElementById(\"black\");\r\nlet red = document.getElementById(\"red\");\r\nlet yellow = document.getElementById(\"yellow\");\r\nlet blue = document.getElementById(\"blue\");\r\nlet eraser = document.getElementById(\"eraser\");\r\nlet pen = document.getElementById(\"pen\");\r\nlet clear = document.getElementById(\"clear\");\r\n\r\n\r\ncanvas.width = document.documentElement.clientWidth;\r\ncanvas.height = document.documentElement.clientHeight;\r\nlet ctx = canvas.getContext(\"2d\");\r\n\r\nctx.fillStyle = \"black\";\r\nctx.strokeStyle = \"none\";\r\nctx.lineWidth = 5;\r\nctx.lineCap = \"round\";//线条转折处为圆，而不是直角锯齿状\r\n\r\nlet painting = false; //控制画画触发时机，是否按下\r\nlet eraserEnabled = false //控制橡皮擦触发时机，是否擦除\r\nlet lastPoint = [undefined,undefined];\r\n\r\nmonitor()\r\nfunction monitor(){\r\n  thin.onclick = ()=>{\r\n    ctx.lineWidth = 5\r\n    thin.classList.add('active')\r\n    thick.classList.remove('active')\r\n  }\r\n  thick.onclick = ()=>{\r\n    ctx.lineWidth = 10\r\n    thick.classList.add('active')\r\n    thin.classList.remove('active')\r\n  }\r\n  black.onclick = ()=>{\r\n    black.classList.add(\"active\")\r\n    red.classList.remove(\"active\")\r\n    yellow.classList.remove(\"active\")\r\n    blue.classList.remove(\"active\")\r\n    ctx.strokeStyle = \"black\"\r\n  }\r\n  red.onclick = ()=>{\r\n    red.classList.add(\"active\")\r\n    black.classList.remove(\"active\")\r\n    yellow.classList.remove(\"active\")\r\n    blue.classList.remove(\"active\")\r\n    ctx.strokeStyle = \"red\"\r\n  }\r\n  yellow.onclick = ()=>{\r\n      yellow.classList.add(\"active\")\r\n      black.classList.remove(\"active\")\r\n      red.classList.remove(\"active\")\r\n      blue.classList.remove(\"active\")\r\n      ctx.strokeStyle = \"yellow\"\r\n  }\r\n  blue.onclick = ()=>{\r\n      blue.classList.add(\"active\")\r\n      black.classList.remove(\"active\")\r\n      red.classList.remove(\"active\")\r\n      yellow.classList.remove(\"active\")\r\n      ctx.strokeStyle = \"blue\"\r\n  }\r\n  eraser.onclick = ()=>{\r\n    eraserEnabled = true\r\n    painting = false//需要同时将painting 置为false，否则会画笔和橡皮擦会同时开启\r\n    eraser.classList.add('active')\r\n    pen.classList.remove('active')\r\n  }\r\n  pen.onclick = ()=>{\r\n    eraserEnabled = false\r\n    // painting = true//不能开启，否则鼠标没有按下就开始画画\r\n    pen.classList.add(\"active\")\r\n    eraser.classList.remove(\"active\")\r\n  }\r\n  clear.onclick = ()=>{\r\n    ctx.clearRect(0,0,canvas.width,canvas.height)\r\n  }\r\n  download.onclick = ()=>{\r\n    let a = document.createElement('a')\r\n    a.download = '我的涂鸦.png'\r\n    let url = canvas.toDataURL()\r\n    a.href = url\r\n    a.click()\r\n  }\r\n// 兼容手机\r\nlet isTouchDevice = \"ontouchstart\" in document.documentElement;//唯一检测是否为移动端的方法\r\nif (isTouchDevice) {\r\n  canvas.ontouchstart = (e) => { //开始触摸\r\n    painting = true\r\n    let x = e.touches[0].clientX;\r\n    let y = e.touches[0].clientY;\r\n    lastPoint = [x, y]; //记下第一次鼠标点击的位置，以作为画线的终点的参考点\r\n  };\r\n  canvas.ontouchmove = (e) => { //手指移动\r\n    let x = e.touches[0].clientX;\r\n    let y = e.touches[0].clientY;\r\n    if(painting){\r\n      if(eraserEnabled){   \r\n        ctx.clearRect(x-10,y-10,30,30)\r\n      }else{\r\n        drawLine(lastPoint[0], lastPoint[1], x, y);\r\n        lastPoint = [x, y];//需要实时更新画线的 起点，记录每次点击位置\r\n      }\r\n    }\r\n\r\n\r\n  };\r\n  canvas.ontouchend = ()=>{ //结束触摸\r\n    painting = false\r\n  }\r\n} else {\r\n  //PC端\r\n  canvas.onmousedown = (e) => { //鼠标按下\r\n    painting = true;\r\n    lastPoint = [e.clientX, e.clientY];\r\n  };\r\n\r\n  canvas.onmousemove = (e) => { //鼠标移动\r\n    let x = e.clientX\r\n    let y = e.clientY\r\n    if(painting){\r\n      if(eraserEnabled){\r\n        ctx.clearRect(x-10,y-10,30,30)\r\n      }else{\r\n        drawLine(lastPoint[0], lastPoint[1],x,y );\r\n        lastPoint = [x, y];\r\n      }\r\n    }\r\n\r\n  };\r\n  canvas.onmouseup = () => { //鼠标抬起\r\n    painting = false;\r\n  };\r\n}\r\n\r\n}\r\n//连线\r\nfunction drawLine(x1, y1, x2, y2) {\r\n  ctx.beginPath();\r\n  ctx.moveTo(x1, y1);//起点\r\n  ctx.lineTo(x2, y2);//终点\r\n  ctx.stroke(); //描边\r\n}\r\n//清除笔迹\r\n//更换画笔颜色\r\n//重置画板\r\n"]}